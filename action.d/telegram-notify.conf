# fail2ban-telegram/action.d/telegram-notify.conf
# GitHub-safe example (no secrets).
# Sends Telegram alerts with:
#  - new banned IP
#  - GeoIP (country)
#  - all currently banned IPs in this jail

[Definition]

actionstart =
actionstop  =
actioncheck =

# When an IP is banned:
#  - GEO    : GeoIP country lookup
#  - BANNED : all currently banned IPs for this jail (from fail2ban-client)
#
# NOTE: keep each action on a single line to avoid INI parsing issues.
actionban = GEO=$(/usr/bin/geoiplookup <ip> 2>/dev/null | head -n1 | sed 's/.*: //'); BANNED=$(/usr/bin/fail2ban-client status <name> 2>/dev/null | sed -n 's/.*Banned IP list: *//p'); /usr/bin/curl -s -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage" -d chat_id="YOUR_CHAT_ID" -d text="[Fail2Ban] ðŸš« Jail <name> banned IP <ip> (GeoIP: $GEO) for <bantime> seconds (failures: <failures>). All banned IPs: $BANNED"

# When an IP is unbanned
actionunban = /usr/bin/curl -s -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage" -d chat_id="YOUR_CHAT_ID" -d text="[Fail2Ban] âœ… Jail <name> unbanned IP <ip>"

[Init]
